---
import CuadriculaIcon from '@/icons/Cuadricula.astro'
import CheckIcon from '@/icons/Check.astro'
import CompactIcon from '@/icons/Compact.astro'
import MenuIcon from '@/icons/Menu.astro'
import HomeIcon from '@/icons/Home.astro'
import SearchIcon from '@/icons/Search.astro'
import PlusIcon from '@/icons/Plus.astro'
import RightArrowIcon from '@/icons/RightArrow.astro'
import LibraryIcon from '@/icons/Library.astro'
import Cuadricula from '@/icons/Cuadricula.astro'

import { playlists } from '@/lib/data'

import SideMenuItem from '@/components/SideMenuItem.astro'
import SideMenuCard from '@/components/SideMenuCard.astro'
---

<nav class="nav flex flex-col flex-1 overflow-hidden">

  <div class="home bg-zinc-900 rounded-lg">
    <ul>
      <SideMenuItem href='/'>
        <HomeIcon/> Inicio
      </SideMenuItem>
      <SideMenuItem href='/#'>
        <SearchIcon/> Buscar
      </SideMenuItem>
    </ul>
  </div>

  <div class="container bg-zinc-900 rounded-lg flex flex-col flex-1 overflow-y-auto overx">

    <div class="options">

      <div class="library flex justify-between">

        <button class="item-link library-title flex gap-4 items-center py-3 px-f transition duration-300">
          <LibraryIcon/>
          Tu biblioteca
        </button>

        <div class="library_options flex gap-2">
          <button class="rouded-icon item-link rounded-full transition duration-300 hover:bg-zinc-800"><PlusIcon/></button>
          <button class="rouded-icon item-link rounded-full transition duration-300 hover:bg-zinc-800"><RightArrowIcon/></button>
        </div>
      </div>

      <div class="options-view flex gap-2">
        <button class="rounded-full transition duration-300 bg-zinc-800 p-1 px-2 flex text-zinc-200 hover:bg-zinc-700">Playlists</button>
        <button class="rounded-full transition duration-300 bg-zinc-800 p-1 px-2 flex text-zinc-200 hover:bg-zinc-700">Álbumes</button>
      </div>

    </div>


    <div class="recent-container bg-zinc-900 overflow-y-auto">

      <div class="second flex flex-col gap-4">
        <div class="options-search gap-3 flex items-center justify-between">

          <div class="library_search flex items-center">
            <input class="searchInput" type="text" placeholder="Buscar en Tu biblioteca">
            <button class="rouded-icon item-link activeSearchBtn"><SearchIcon/></button>
          </div>

          <span class="rouded-icon recent">
            <button class="item-link recent_btn">
              <span>Recientes</span>
              <span><MenuIcon/></span>
            </button>
            <div class="recent_menu">
              <ul>
                <li class="title_menu"><span>Clasificar por</span></li>
                <li>
                  <button>
                    <span>Recientes</span>
                    <span><CheckIcon/></span>
                  </button>
                </li>
                <li>
                  <button>
                    <span>Agregados recientemente</span>
                    <span></span>
                  </button>
                </li>
                <li>
                  <button>
                    <span>Alfabéticamente</span>
                    <span></span>
                  </button>
                </li>
                <li>
                  <button>
                    <span>Creador</span>
                    <span></span>
                  </button>
                </li>
              </ul>
              <ul class="view_menu">
                <li class="title_menu"><span>Ver como</span></li>
                <li>
                  <button>
                    <div>
                      <span><CompactIcon/></span>
                      <span>Compacta</span>
                    </div>
                    <span></span>
                  </button>
                </li>
                <li>
                  <button>
                    <div>
                      <span><MenuIcon/></span>
                      <span>Lista</span>
                    </div>
                    <span><CheckIcon/></span>
                  </button>
                </li>
                <li>
                  <button>
                    <div>
                      <span><Cuadricula/></span>
                      <span>Cuadricula</span>
                    </div>
                    <span></span>
                  </button>
                </li>
              </ul>
            </div>
          </span>
        </div>
      </div>

      <div class="playlists flex flex-col">
        {
          playlists.map(playlist => <SideMenuCard playlist={playlist} />)
        }
      </div>
    </div>

  </div>



  <!-- <div class="bg-zinc-900 rounded-t-lg first flex flex-col gap-4">

    <div class="library flex justify-between">

      <button class="item-link flex gap-4 items-center py-3 px-f transition duration-300">
        <LibraryIcon/>
        Tu biblioteca
      </button>

      <div class="library_options flex gap-2">
        <button class="rouded-icon item-link rounded-full transition duration-300 hover:bg-zinc-800"><PlusIcon/></button>
        <button class="rouded-icon item-link rounded-full transition duration-300 hover:bg-zinc-800"><RightArrowIcon/></button>
      </div>
    </div>

    <div class="options-view flex gap-2">
      <button class="rounded-full transition duration-300 bg-zinc-800 p-1 px-2 flex text-zinc-200 hover:bg-zinc-700">Playlists</button>
      <button class="rounded-full transition duration-300 bg-zinc-800 p-1 px-2 flex text-zinc-200 hover:bg-zinc-700">Álbumes</button>
    </div>
  </div>


  <div class="recent-container bg-zinc-900 rounded-b-lg flex flex-col overflow-y-auto">
    <div class="second flex flex-col gap-4">
      <div class="options-search gap-3 flex items-center justify-between">

        <div class="library_search flex items-center">
          <input class="searchInput" type="text" placeholder="Buscar en Tu biblioteca">
          <button class="rouded-icon item-link activeSearchBtn"><SearchIcon/></button>
        </div>

        <span class="rouded-icon recent">
          <button class="item-link recent_btn">
            <span>Recientes</span>
            <span><MenuIcon/></span>
          </button>
          <div class="recent_menu">
            <ul>
              <li class="title_menu"><span>Clasificar por</span></li>
              <li>
                <button>
                  <span>Recientes</span>
                  <span><CheckIcon/></span>
                </button>
              </li>
              <li>
                <button>
                  <span>Agregados recientemente</span>
                  <span></span>
                </button>
              </li>
              <li>
                <button>
                  <span>Alfabéticamente</span>
                  <span></span>
                </button>
              </li>
              <li>
                <button>
                  <span>Creador</span>
                  <span></span>
                </button>
              </li>
            </ul>
            <ul class="view_menu">
              <li class="title_menu"><span>Ver como</span></li>
              <li>
                <button>
                  <div>
                    <span><CompactIcon/></span>
                    <span>Compacta</span>
                  </div>
                  <span></span>
                </button>
              </li>
              <li>
                <button>
                  <div>
                    <span><MenuIcon/></span>
                    <span>Lista</span>
                  </div>
                  <span><CheckIcon/></span>
                </button>
              </li>
              <li>
                <button>
                  <div>
                    <span><Cuadricula/></span>
                    <span>Cuadricula</span>
                  </div>
                  <span></span>
                </button>
              </li>
            </ul>
          </div>
        </span>
      </div>
    </div>

    <div class="playlists flex flex-col">
      {
        playlists.map(playlist => <SideMenuCard playlist={playlist} />)
      }
    </div>
  </div> -->

</nav>

<script>
  const library_search = document.querySelector('.library_search')
  const activeSearchBtn = document.querySelector('.activeSearchBtn')
  const searchInput = document.querySelector('.searchInput')
  const recentBtn = document.querySelector('.recent_btn')
  const recentMenu = document.querySelector('.recent_menu')
  activeSearchBtn.addEventListener("click", () => {
    library_search.classList.add('open_search')
    searchInput.focus()
  })

  searchInput.addEventListener('focusout', () => {
    library_search.classList.remove('open_search')
  })


  recentBtn?.addEventListener('click', () => {
    recentMenu?.classList.toggle('open')
  })
</script>

<style>
  .nav {
    gap: .8rem;
  }
  .home ul {
    padding: .8rem 1.2rem;
  }
  .options {
    /* box-shadow: 0 6px 10px rgba(0, 0, 0); */
    z-index: 1;
  }
  .library {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: .8rem 1.6rem;
  }
  .library-title {
    padding: .4rem .8rem;
  }
  .library_options button {
    padding: .8rem;
  }
  .options-view {
    /* height: 4.8rem; */
    margin: 1rem 1.6rem;
  }
  .options-view button {
    padding: .4rem 1.2rem;
    /* height: 3.2rem; */
    font-weight: bold;
    font-size: 1.4rem;
  }
  .options-search {
    padding: .2rem .8rem;
  }
  .library_search {
    display: flex;
    position: relative;
    transition: all .3s ease;
    width: 100%;
  }
  .library_search input {
    outline: none;
    position: absolute;
    background: transparent;
    font-size: 1.2rem;
    left: 3.2rem;
    width: 0;
    transition: all .3s ease;
    opacity: 0;
  }
  .library_search button:hover {
    background: #27272a;
    border-radius: 100%;
  }
  .library_search button {
    padding: .8rem;
  }
  .library_search.open_search:hover {
    border-radius: .5rem;
  }
  .library_search.open_search {
    /* width: 18.8rem; */
    background: #27272a;
    border-radius: .5rem;
  }
  .library_search.open_search button svg {
    fill: #FFF;
  }
  .library_search.open_search input {
    width: 100%;
    color: #FFF;
    opacity: 1;
  }

  /* RECENT MENU */
  .recent-container {
    padding: .8rem;
    display: flex;
    flex-direction: column;
  }
  .recent-container::-webkit-scrollbar {
    width: 1.2rem;
  }
  .recent-container::-webkit-scrollbar-thumb {
    background: transparent;
    transition: .3s all ease;
    opacity: 0;
  }
  .recent-container:hover::-webkit-scrollbar-thumb{
    background: #898989;
  }
  .recent button {
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 14px;
    gap: 10px;
  }
  .recent {
    position: relative;
    width: 17.9rem;
    color: #acacac;
    height: 3.2rem;
  }
  .recent_menu {
    position: absolute;
    width: max-content;
    right: 0;
    top: 3.7rem;
    background: rgba(40,40,40);
    border-radius: .5rem;
    height: 0;
    overflow-y: hidden;
    opacity: 0;
  }
  .recent_menu.open {
    height: min-content;
    opacity: 1;
  }
  .recent_menu ul {
    padding: .4rem;
  }
  .recent ul li {
    height: 4rem;
    width: 100%;
    height: 100%;
  }
  .recent ul li button {
    width: 100%;
    height: 100%;
    padding: 1.2rem;
    padding-right: .8rem;
    font-size: clamp(1rem, 2vw, 1.3rem);
    color: #FFF;
    display: flex;
    justify-content: space-between;
    transition: .3s all ease;
  }
  .title_menu {
    font-size: 1.1rem;
    color: rgba(124,124,124);
    font-weight: 900;
    padding: 1.2rem;
    padding-right: .8rem;
  }
  .recent ul li button:hover {
    background: #464646;
  }

  /* VIEW MENU */

  .view_menu button div {
    display: flex;
    gap: 1rem;
  }


  /* PLAYLIST CONTAIN */
</style>


<style is:global>
  .item-link {
    font-size: 1.6rem;
		color: #acacac;
		transition:all ease .3s;
	}
	.item-link svg {
		fill: #acacac;
		transition:all ease .3s;
	}
	.item-link:hover, .item-link:hover svg {
		color: #FFF;
		fill: #FFF;
	}
  .rouded-icon svg {
    width: 16px;
    height: 16px;
  }
  .library_options button .svg {
    width: 16px;
    height: 16px;
    fill: #acacac;
		transition:all ease .3s;
  }

  .library_search.open_search button svg {
    fill: #FFF;
  }

  .recent svg {
    fill: #acacac
  }
</style>
